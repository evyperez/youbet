@use 'sass:color';

@use '../layout/form';
@use '../abstracts/index' as my;
@use 'abstracts/functions' as f;

%text-field-reset {
  @extend %os-element-reset;
  box-sizing: inherit;

  width: 100%;
  height: f.to-rem(40px);
  padding: 0 f.to-rem(12px);

  font-size: 16px;
  line-height: f.to-rem(40px);
  color: palette('gray');

  cursor: text;

  background-color: palette('form', 'background');
  border-color: palette('form', 'border');
  outline: none;

  appearance: textfield;

  &:-moz-ui-invalid {
    border-color: palette('feeback', 'default');
  }

  &:focus {
    border-color: palette('feeback', 'selected');
    outline: 0;
  }
}

[type='email'] {
  @extend %text-field-reset;
}

[type='number'] {
  @extend %text-field-reset;
}

/**
* Fix the cursor style for Chrome's increment/decrement buttons. For certain
* `font-size` values of the `input`, it causes the cursor style of the
* decrement button to change from `default` to `text`.
*/

[type='number']::-webkit-inner-spin-button,
[type='number']::-webkit-outer-spin-button {
  height: auto;
}

[type='password'] {
  @extend %text-field-reset;
}

/**
* Jakob Nielsen survey suggests that 27 characters could be good for search fields. They said that around 9 in 10 queries will fit in that space.
*
* 1. Correct the outline style in Safari.
* 2. iPhone bug displaying search input with rounded angles before entering into the field
*/
[type='search'] {
  @extend %text-field-reset;

  padding-left: 3rem;

  background-color: palette('gray', '10%');
  background-image: url('~src/assets/icons/magnifying-glass.svg');
  background-repeat: no-repeat;
  background-position: left 0.5rem center;
  outline-offset: -2px;
}

/**
* Remove inner padding and search cancel button in Safari and Chrome on OS X.
* Safari (but not Chrome) clips the cancel button when the search input has
* padding (and `textfield` appearance).
*/

[type='tel'] {
  @extend %text-field-reset;
}

[type='text'] {
  @extend %text-field-reset;
}

[type='url'] {
  @extend %text-field-reset;
}

textarea {
  @extend %text-field-reset;

  min-height: f.to-rem(90px);
  padding: f.to-rem(12px) f.to-rem(12px);
  overflow: auto;

  line-height: inherit;
  vertical-align: top;

  cursor: text;
  resize: vertical;
}
